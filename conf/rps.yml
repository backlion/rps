
title: Rotating Proxy Server

daemon: false

pidfile: /var/run/rps.pid

servers:
    #Request timeout
    rtimeout: 30

    #Forward timeout should consider retry times
    #So set forward timeout less than request timeout is make sense in general
    ftimeout: 20

    #servers
    ss:
        - proto: socks5
          listen: 0.0.0.0
          port: 9890
          #username: rps
          #password: secret
          

        - proto: http
          listen: "0.0.0.0"
          port: 9891
          username: rps
          password: secret

upstreams:
    refresh: 600 #5 minutes

    #rr: round-robin
    #random: random schedule
    #wrr: weighted round robin
    schedule: rr

    # Just leave hybrid=false if you don't understand what will happen 
    # after enable hybrid
    hybrid: false

    # If connect upstream failed in upstream phase, attempt connect new upstream.
    # re-connect is low cost operation relative to retry.
    maxreconn: 3 

    # If handshake with upstream failed, try handshake with new upstream.
    # Need re-connect, re-handshake, re-auth etc..
    maxretry: 3

    pools:
        - proto: socks5
          rediskey: rps:upstream:socks5

        - proto: http
          rediskey: rps:upstream:http

redis:
    host: dev1
    port: 6379
    db: 0
    password: tfqmcA0JvG04EHKDj
    timeout: 5

log:
    file: ../logs/rps.log
    level: INFO #DEBUG| INFO| NOTICE| WARN| ERROR| CRIT

